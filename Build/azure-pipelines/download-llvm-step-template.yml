parameters:
    llvmBuildAssetName: ''
    llvmVersion: ''

steps:
  # Download and extract the LLVM build from the pipeline for https://github.com/WAVM/WAVM-LLVM/
  # The Azure Pipelines DownloadGithubRelease task requires a service connection, which don't work
  # when building Pull Requests for security.
  # Instead, just use wget to download the release.
  - script: wget https://github.com/WAVM/WAVM-LLVM/releases/download/${{parameters.llvmVersion}}/${{parameters.llvmBuildAssetName}}.zip
    displayName: Download LLVM build
    workingDirectory: $(Pipeline.Workspace)
  - task: ExtractFiles@1
    displayName: Extract LLVM Build
    inputs:
      archiveFilePatterns: $(Pipeline.Workspace)/${{parameters.llvmBuildAssetName}}.*
      destinationFolder: $(Build.ArtifactStagingDirectory)/llvm
      cleanDestinationFolder: false
